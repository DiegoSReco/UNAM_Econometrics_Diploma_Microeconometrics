---
title: "Diplomado Econometr√≠a Modulo IV:<br> Microeconometr√≠a"
subtitle: "Universidad Nacional Aut√≥noma de M√©xico (UNAM)<br>Facultad de Econom√≠a"
author: "Mtro. Diego S√°nchez Rojas"
editor: visual
format:
  revealjs:
    pdf-export: true
    center-subtitle-slide: false
    slide-number: c/t
    self-contained: true
    slide-level: 4
    incremental: true
---

#### Secci√≥n 1: Microeconometr√≠a (Evaluaci√≥n del curso)

-   Evaluaci√≥n del Curso

| Componente                  | Descripci√≥n                                                         | Porcentaje |
|----------------|-----------------------------------------|---------------|
| Pr√°ctica Aplicada 1         | An√°lisis con frameworks de microeconometr√≠a y m√©todos econom√©tricos | 30%        |
| Pr√°ctica Te√≥rica Aplicada 2 | An√°lisis con frameworks de microeconometr√≠a y m√©todos econom√©tricos | 30%        |
| Quiz                        | Evaluaciones breves de conceptos clave                              | 30%        |
| Participaci√≥n               | Intervenciones, asistencia y compromiso                             | 10%        |
| **Total**                   |                                                                     | **100%**   |

#### Secci√≥n 1: Microeconometr√≠a (Bibliograf√≠a)

**Principal**

-   Wooldridge, J. M. (2010). Econometric Analysis of Cross Section and Panel Data (2nd ed.). MIT Press.

-   Angrist, J. D., & Pischke, J. S. (2008). Mostly Harmless Econometrics: An Empiricist's Companion. Princeton University Press.

**Complementaria**

-   Cameron, A. C., & Trivedi, P. K. (2005). Microeconometrics: Methods and Applications. Cambridge University Press.

-   Wooldridge, J. M. (2019). Introductory Econometrics: A Modern Approach (7th ed.). Cengage Learning.

#### Secci√≥n 1: Microeconometr√≠a {.smaller}

1.  ¬øQu√© es la microeconometr√≠a?

-   Subrama de la econometr√≠a que utiliza **datos** de unidades o agentes econ√≥micos como individuos, familias, empresas o territorios (municipios, estados o regiones) y m√©todos de regresi√≥n avanzados para analizar el comportamiento (relaciones, interacciones) de ciertas variables de inter√©s (Cameron y Trivedi, 2005; Wooldridge 2002, Hausman, 2001; Owen 2019).

-   En enfoques recientes el objetivo principal de la microeconometr√≠a es comprender **relaciones causales**: determinar si un cambio en una variable causa un cambio en otra, en lugar de simplemente observar una asociaci√≥n.

-   Disciplina que combina frameworks casuales y t√©cnicas estad√≠sticas,en donde cada an√°lisis emp√≠rico se convierte en un ejercicio de identificaci√≥n de efectos causales bajo **supuestos expl√≠citos** y **estrategias de identificaci√≥n**.

#### Secci√≥n 1: Microeconometr√≠a (¬øQu√© preguntas responde la microeconometr√≠a?) {.smaller}

-   ¬øCu√°l es efecto de un aumento en el salario m√≠nimo en el nivel de empleo (o en los precios)? (o probabilidad de estar ocupado)
-   ¬øQu√© impacto tiene la prohibici√≥n del outsourcing en la raz√≥n del producto marginal del trabajo con respecto al salario ?
-   ¬øCu√°l es el impacto de reducir el tama√±o de clase en el aprovechamiento escolar?
-   ¬øCu√°l es el efecto de los programas de becas sobre la deserci√≥n?
-   ¬øCu√°l es el efecto de la actividad f√≠sica constante sobre la productividad laboral?
-   ¬øCu√°l es el efecto de la inversi√≥n p√∫blica en el crecimiento econ√≥mico local?
-   ¬øC√≥mo afecta una disminuci√≥n en el IVA al consumo de diferentes grupos socioecon√≥micos?
-   ¬øMejora la satisfacci√≥n del cliente de un banco un nuevo dise√±o en la aplicaci√≥n?
-   ¬øQu√© efecto tiene la ampliaci√≥n de l√≠nea de cr√©dito en el consumo?

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Framework Resultado potencial) {.smaller}

**Pregunta base: ¬øCu√°l es el efecto causal de un tratamiento/intervenci√≥n ($T$) en la variable objetivo $Y$?**


-   Ejemplo: ¬øCu√°l es el efecto de aumentar en 100% el salario m√≠nimo sobre la tasa de desempleo?


#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Framework Resultado potencial) {.smaller}

**Definiendo el problema**

-   Unidad de an√°lisis: Municipios ($i$)
-   Tratamiento ($T$): Ley de salario m√≠nimo (m√°s alto en otra regi√≥n) ($T_i = 1$) vs bajo ($T_i = 0$)
-   Outcome ($Y$): Tasa de desempleo o Nivel de empleo

$$
\text{resultado potencial} = \begin{cases}
Y_{1i}, & \text{if } T_i = 1 \\
Y_{0i}, & \text{if } T_i = 0
\end{cases}
$$

$Y_{1i}$: tasa de desempleo en municipios con salario m√≠nimo m√°s alto

$Y_{0i}$: tasa de desempleo en municipios con salario m√≠nimo m√°s bajo

(Rubin, 1974, 1977; Holland, 1986)

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Problema fundamental) {.smaller}

El efecto causal para el municipio $i$ :

$$
\tau_{i} = Y_{1i} - Y_{0i}
$$

-   **No es posible calcularlo**

-   No es posible tener un **contrafactual**: No podemos obervar $i$ en $t$ con salario m√≠nimo alto como y con salario m√≠nimo bajo simult√°neamente.

-   Nos enfrentamos al **problema fundamental de inferencia causal** .

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Problema fundamental) {.smaller}

-   ¬øQu√© comparaciones s√≠ podemos realizar?

-   El promedio de los municipios con un salario m√≠nimo m√°s alto y m√°s bajo. (**Cross-sectional**)

$$
\underbrace{E[Y_i \mid T_i = 1] - E[Y_i \mid T_i = 0]}_{\text{Diferencia promedio observada(DPO)}}
$$

-   ¬øEsta diferencia promedio observada refleja el **efecto casual**?

-   La diferencia observada en el resultado promedio entre un grupo tratado y uno no tratado, no necesariamente refleja un **efecto causal** debido a que los grupos pueden diferir por razones distintas al tratamiento (como nivel socioecon√≥mico, educaci√≥n,inversi√≥n, etc.)

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Problema fundamental) {.smaller}

-   ¬øQu√© relaci√≥n tiene la DPO con el efecto causal que estamos buscando?

-   Desglosemos la DPO:


$$
E[Y_i \mid T_i = 1] - E[Y_i \mid T_i = 0] = 
\underbrace{E[Y_{1i} \mid T_i = 1] - E[Y_{0i} \mid T_i = 1]}_{\text{Efecto causal promedio en tratados (ATT)}}
+ $$ 
$$
\underbrace{E[Y_{0i} \mid T_i = 1] - E[Y_{0i} \mid T_i = 0]}_{\text{Sesgo de selecci√≥n}}
$$

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: ATT y sesgo de selecci√≥n ) {.smaller}

1.  **Efecto causal promedio en tratados (ATT)**


-   Captura el efecto causal: 

¬øCu√°nto cambian en promedio los resultados para quienes recibieron el tratamiento,  comparando el resultado observado $E[Y_{1i}|T_i=1]$ con el que habr√≠an tenido sin   tratamiento $E[Y_{0i}|T_i=1]$  ?

2.  **Sesgo de selecci√≥n**

-   Mide si los tratados y no tratados habr√≠an tenido resultados diferentes incluso sin tratamiento. Es decir, si los tratados ya eran diferentes desde antes.

-   Surge cuando las unidades ($i$) que reciben un tratamiento son sistem√°ticamente diferentes de aquellas que no lo reciben, por razones que tambi√©n afectan el resultado.

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Sesgo de selecci√≥n) {.smaller}

-   *"El objetivo en la mayor√≠a de la investigaci√≥n econ√≥mica emp√≠rica es superar(minimizar) el sesgo de selecci√≥n y, por tanto, decir algo relacionado al efecto casual de una variable* $T_i$" - Joshua Angrist

-   ¬øC√≥mo podemos solucionar el problema de **sesgo de selecci√≥n**?

-   üé≤ Aleatorizaci√≥n:

    -   La **asignaci√≥n aleatoria** del tratamiento es el m√©todo m√°s s√≥lido para eliminar el sesgo de selecci√≥n.

    -   Cuando los individuos se asignan al grupo tratado ($T_i = 1$) o control ($T_i = 0$) **de forma completamente aleatoria**, las caracter√≠sticas observables e inobservables quedan, en promedio, balanceadas entre los dos grupos.

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Sesgo de selecci√≥n) {.smaller}

Bajo aleatorizaci√≥n, se cumple que:

$$
E[Y_{0i} \mid T_i = 1] = E[Y_{0i} \mid T_i = 0]
$$

Es decir, **los resultados potenciales sin tratamiento (**$Y_0$) son iguales en promedio entre tratados y no tratados dada la independecia de $Y_{0i}$ y $T_i$.

Esto elimina el sesgo de selecci√≥n:

$$
\underbrace{E[Y_{0i} \mid T_i = 1] - E[Y_{0i} \mid T_i = 0]}_{= 0}
$$

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Sesgo de selecci√≥n) {.smaller}

Por lo tanto:

$$
E[Y_i \mid T_i = 1] - E[Y_i \mid T_i = 0]
= E[Y_{1i} \mid T_i = 1] - E[Y_{0i} \mid T_i = 1]
$$ - La **diferencia promedio observada** es una estimaci√≥n no sesgada del **efecto causal promedio en los tratados(ATT)**

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Aleatorizaci√≥n) {.smaller}

¬øEn donde encontramos la aleatorizaci√≥n?

-   **Experimentos controlados aleatorios (RCTs, por sus siglas en ingl√©s)**. Los cuales eran considerados como el **gold standard ü•á** para estimar efectos causales.

Ejemplos:

-   **Medicina**: Ensayos cl√≠nicos para probar la eficacia de vacunas o tratamientos.
-   **Educaci√≥n**: Evaluaciones de programas como tutor√≠as, becas o incentivos escolares.
-   **Pol√≠tica p√∫blica**: Programas de transferencias monetarias condicionadas, subsidios, o formaci√≥n laboral.
-   **Econom√≠a del desarrollo**: Intervenciones en comunidades asignadas al azar (ej. microcr√©ditos, acceso a agua).

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Aleatorizaci√≥n) {.smaller}

**Desventajas de la aleatorizaci√≥n**

1.  **Costos altos**

-   Realizar un experimento requiere tiempo, personal, dise√±o, monitoreo y seguimiento.

2.  **Problemas √©ticos**

-   No siempre es √©tico asignar un tratamiento al azar (por ejemplo, negar una vacuna potencialmente efectiva a un grupo de personas).

3.  **Problemas de implementaci√≥n**

-   En la pr√°ctica, algunas personas no siguen su asignaci√≥n (non-compliance).

4.  **Validez externa limitada**

-   Los resultados son v√°lidos para la poblaci√≥n del experimento, pero **no siempre se generalizan** a otras poblaciones o contextos.

#### Secci√≥n 1: Microeconometr√≠a (Inferencia Causal: Alternativas al gold standard) {.smaller}

-   Cuando la aleatorizaci√≥n no es posible, recurrimos a **m√©todos cuasiexperimentales** y **herramientas econom√©tricas** para intentar identificar efectos causales a partir de **datos observacionales**.

-   Actualmente, se incluye el uso de **diagramas causales o DAGs** para construir frameworks causales robustos que gu√≠en el uso adecuado de t√©cnicas econom√©tricas, los cuales ayudan a definir qu√© variables deben incluirse y c√≥mo interactuan (Adams 2021).

#### Secci√≥n 1: Microeconometr√≠a (Regresi√≥n lineal y casualidad ) {.smaller}

Partimos de un an√°lisis de regresi√≥n y datos observados:

$$Y_i = E[Y \mid T_i, \mathbf{x}_i] + \varepsilon_i$$ Donde

-   $E[Y \mid T_i, \mathbf{x}_i]$: valor esperado del resultado dado el tratamiento y las covariables.

-   $\varepsilon_i$: perturbaci√≥n aleatoria.

No toma una interpretaci√≥n causal de forma directa.

#### Secci√≥n 1: Microeconometr√≠a (Independencia condicional) {.smaller}

**Condici√≥n para Interpretaci√≥n Causal**

**Supuesto de Independencia Condicional (S.1)**:

$${Y_{0i}, Y_{1i}} \perp T_i | \mathbf{x}_i$$

-   Dados controles $\mathbf{x}_i$, la asignaci√≥n al tratamiento es independiente de los resultados potenciales.

-   **Selecci√≥n sobre observables** (*selection-on-observables*), porque:

-   Las covariables que deben mantenerse fijas se asumen como **conocidas y observadas**

> **Intuici√≥n**: Una vez que se ajusta por $\mathbf{x}_i$, el tratamiento es independiente del resultado potencial, replicando la condici√≥n de un experimento aleatorio (donde $T_i \perp Y_{0i}, Y_{1i}$ sin necesidad de $\mathbf{x}_i$).


#### Secci√≥n 1: Microeconometr√≠a (Independencia condicional| Diagramas Causales) {.smaller}

**¬øC√≥mo se ver√≠a en Diagramas Causales/Diagramas Ac√≠clicos Dirigidos (DAGs)?**

Efecto Causal de Inter√©s: 

$$T_i‚ü∂Y $$
Como estamos trabajando con datos observados podemos tener una **variable confundidora (confounder) no observada**:  

$$T_i \leftarrow U\rightarrow Y_i $$

**Camino Espurio o de Confusi√≥n**

$\therefore$ El **S.1** se violar√≠a

#### Secci√≥n 1: Microeconometr√≠a (Independencia condicional| Diagramas Causales) {.smaller}

- ¬øC√≥mo bloquear ese camino espurio?

**Mecanismo**: Al condicionar sobre $\mathbf{x}_i$ (ajustar la estimaci√≥n por estas variables) en donde $x_i$ ser√° el conjunto de **variables confusoras observables**, el camino espurio se cierra.

$$T_i \leftarrow x_i\rightarrow Y_i $$
$$\therefore$$
- S√≥lo tendremos el camino causal directo $T_i\rightarrow Y_i$.

- El supuesto **S.1** se cumplir√° y se logra la **identificaci√≥n casual**.

#### Secci√≥n 1: Microeconometr√≠a ( Diagramas Causales) {.smaller}

**Definici√≥n**

Un **diagrama causal/DAG** es una representaci√≥n visual y matem√°tica de las relaciones causales entre variables.

- **Dirigido**: las flechas indican la direcci√≥n de la influencia causal (de la causa al efecto).

- **Ac√≠clico**: no existen bucles cerrados; es decir, una variable no puede causarse a s√≠ misma directa o indirectamente.

- **Grafo**: est√° formado por nodos (variables) y aristas dirigidas (relaciones causales).

```{mermaid}
graph LR
  X((X_i)) --> T((T_i))
  X --> Y((Y_i))
  T --> Y
  style X fill:#D6EAF8,stroke:#1F618D,stroke-width:2px
  style T fill:#FCF3CF,stroke:#B7950B,stroke-width:2px
  style Y fill:#FADBD8,stroke:#922B21,stroke-width:2px

```



 *Learning Microeconometrics in R*, Section 3.2.1 ‚ÄúConfounded Model DAG‚Äù.

#### Secci√≥n 1: Microeconometr√≠a (Forma funcional ) {.smaller}

Asumimos una forma funcional param√©trica lineal:

$$Y_i = \alpha + \beta T_i +  \mathbf{x}_i'\gamma + \varepsilon_i$$

Donde:
- $T_yi$ variable de tratamiento

-   $\beta_1$ representa el **efecto causal del tratamiento**, bajo el supuesto de independencia condicional.
-   $\mathbf{x}_i$ variables de control
-   $u_i$ es el error idiosincr√°tico,

#### Secci√≥n 1: Microeconometr√≠a (Supuesto 2) {.smaller}

En su forma funcional el modelo de regresi√≥n lineal multiple hereda de S.1 y por lo tanto la

$$
\text{Cov}([T, \mathbf{x}], \varepsilon) = 0 \quad \Leftrightarrow E[\varepsilon \mid T,\mathbf{x}] = 0
$$

-   El error no est√° correlacionado con la **variable de tratamiento* ni con las covariables (confundidores observables).

-   Este es el supuesto crucial para la **consistencia** de los estimadores OLS.

#### Secci√≥n 1: Microeconometr√≠a (Supuesto 3: Normalidad condicioanl) {.smaller}

-   Los errores son **normalmente distribuidos**, con **media cero** y **varianza constante**, **condicional** a los valores de tratamiento $T_i$ y variables de control $\mathbf{x_i}$.

$$
\varepsilon_i \mid T_i, \mathbf{x}_i \sim \mathcal{N}(0, \sigma^2)
$$

-   **Homocedasticidad**: varianza constante del error $\sigma^2$

-   Es clave para la **validez de inferencias estad√≠sticas**

#### Secci√≥n 1: Microeconometr√≠a ( Objetivo) {.smaller}

El objetivo es obtener una **estimaci√≥n insesgada y consistente** del efecto causal del tratamiento $T_i$ sobre el resultado $Y_i$, controlando por $\mathbf{x}_i$:

$$
Y = X\beta + \varepsilon
$$

-   Donde $X$ incluye una constante, la variable de tratamiento $T_i$, y otras covariables observadas.

#### Secci√≥n 1: Microeconometr√≠a ( Objetivo) {.smaller}

-   Por medio del estimador OLS se define como: $$
    \hat{\beta}_{OLS} = (X'X)^{-1}X'Y
    $$

-   Nuestro inter√©s se centra en el componente $\hat{\beta}_{T_i}$, que representa el **efecto promedio del tratamiento bajo los supuestos del modelo**.

#### Secci√≥n 1: Microeconometr√≠a (Propiedades)

-   Bajo los supuestos independencia condicional (S.1) y correlaci√≥n 0 de variables y perturbaci√≥n (S.2) (independencia condicional, homocedasticidad), este estimador es **consistente**(muestras grandes) , **insesgado** (muestras finitas) y **eficiente**.

-   La interpretaci√≥n causal de $\hat{\beta}_{T_i}$ requiere asumir que:

    -   No hay variables omitidas relevantes
    -   No hay confounders observada despu√©s de condicionar en $x_i$

(Angrist y Pischke, 2009; Owen, 2019; Adams, 2021)

#### Secci√≥n 1: Microeconometr√≠a (Problema de Endogeneidad) {.smaller}

-   ¬øQu√© pasa si se viola este supuesto?

Cuando:

$$
\text{Cov}(T, \varepsilon) \ne 0
$$

-   Nos enfrentamos al problema de *endogeneidad*

#### Secci√≥n 1: Microeconometr√≠a (Problema de Endogeneidad) {.smaller}

-¬øPor qu√© ocurre la endogeneidad?

1.  **Variables omitidas relevantes**

    -   **Ejemplo:** Estimar el efecto de un **curso de capacitaci√≥n laboral** sobre el **salario**
    -   Habilidad innata o motivaci√≥n que afecta tanto la participaci√≥n en el curso como el salario.

2.  **Causalidad inversa (simultaneidad)**

    -   Analizar el impacto del **salario m√≠nimo** sobre la **cantidad de empleo**.
    -   La pol√≠tica de salario m√≠nimo puede depender del estado del mercado laboral.

3.  **Error de medici√≥n** en el tratamiento o en una covariable

    -   **Ejemplo:** Evaluar el efecto de un **programa de capacitaci√≥n** cuando la participaci√≥n est√° mal registrada.
    -   Error en la variable genera correlaci√≥n con el t√©rmino de error sesgando la estimaci√≥n.
